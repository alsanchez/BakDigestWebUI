<!DOCTYPE html>
<html ng-app="BakDigestWebUIApp">
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="/bower_components/angular/angular.min.js"></script>
    <script type="text/javascript"
            src="/bower_components/angular-ui-bootstrap/dist/ui-bootstrap-tpls-0.11.0.min.js"></script>
    <script type="text/javascript" src="/js/backup.js"></script>
    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/bower_components/fontawesome/css/font-awesome.min.css"/>
    <style type="text/css">
        .nav, .pagination, .carousel, .panel-title a {
            cursor: pointer;
        }
    </style>
</head>
<body>
<tabset>

    <tab heading="Backups" ng-controller="BackupsController">

        <ul>
            <li ng-repeat="backup in backups">
                {{backup.name}}
                <button ng-click="remove(backup.id)">Delete</button>
            </li>
        </ul>

        <form>
            <label for="name">
                Backup name:
                <input id="name" type="text" ng-model="name">
            </label>
            <label for="frequency">
                Backup frequency:
                <input id="frequency" type="text" ng-model="frequency">
            </label>

            <button ng-click="save()">Save</button>
        </form>
    </tab>

    <tab heading="Digests" ng-controller="DigestsController">

        <div class="row col-xs-10 col-xs-offset-1">

            <h2>Current digests</h2>

            <table class="table">
                <thead>
                <tr>
                    <th>#</th>
                    <th>Email address</th>
                    <th>Last delivery</th>
                    <th>Periodicity</th>
                    <th>Backups</th>
                    <th>Delete</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="digest in digests">
                    <td>{{$index + 1}}</td>
                    <td>{{digest.email}}</td>
                    <td>{{digest.last_delivery | date:"yyyy-MM-dd"}}</td>
                    <td>{{digest.periodicity}}</td>
                    <td>
                        <div ng-repeat="backup in digest.backups">
                            {{backup.name}}
                        </div>
                    <td>
                        <button class="btn btn-danger" ng-click="remove(digest.id)">
                            <i class="fa fa-trash-o"></i>
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>

            <h2>Add a new digest</h2>

            <form role="form">

                <fieldset>

                    <div class="form-group">
                        <label for="email">Email address</label>
                        <input id="email" type="email" class="form-control" ng-model="email" placeholder="Enter email">
                    </div>

                    <div class="form-group">
                        <label for="start_date">Start date</label>

                        <div class="input-group">

                            <input
                                    id="start_date"
                                    class="form-control"
                                    type="text"
                                    ng-model="start_date"
                                    is-open="opened"
                                    datepicker-popup="yyyy-MM-dd"
                                    placeholder="Choose a start date"
                                    >

                            <span class="input-group-btn">

                                <button
                                        type="button"
                                        class="btn btn-default"
                                        ng-click="open($event)">

                                    <i class="fa fa-calendar"></i>

                                </button>

                            </span>

                        </div>
                    </div>

                    <div class="form-group">
                        <label for="periodicity">Periodicity</label>
                        <input id="periodicity" type="number" ng-model="periodicity" class="form-control" placeholder="Enter the periodicity">
                    </div>

                    <div class="form-group">
                        <label>Backups</label>

                        <div class="checkbox" ng-repeat="backup in backups">
                            <label>
                                <input
                                        type="checkbox"
                                        name="backup_ids"
                                        value="{{backup.id}}"
                                        ng-model="backup_ids"
                                        ng-click="toggleSelection(backup.id)"
                                        > {{backup.name}}
                            </label>
                        </div>
                    </div>

                    <button ng-click="save()" class="btn btn-default btn-primary">Save</button>

                </fieldset>

            </form>

        </div>

    </tab>

</tabset>
</body>
</html>